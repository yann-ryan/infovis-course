<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Information Visualization and the Humanities - 9&nbsp; Network Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./design.html" rel="next">
<link href="./digital-mapping-3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./network-analysis.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Network Analysis</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Information Visualization and the Humanities</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction and Using R Markdown</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction to R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./datavis-0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Visualisation 0</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-visualisation-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Visualisation 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-visualisation-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Visualisation 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./digital-mapping-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Digital mapping 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./digital-mapping-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Digital Mapping 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./digital-mapping-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Digital Mapping 3</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./network-analysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Network Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Finishing Touches: Creating Narratives with Your Datavis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./final-project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Final Project</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Assignment 1: Visualize This!</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignment-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Assignment 2: Make a map</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#download-and-install-gephi" id="toc-download-and-install-gephi" class="nav-link active" data-scroll-target="#download-and-install-gephi">Download and install Gephi</a></li>
  <li><a href="#download-and-rename-the-data" id="toc-download-and-rename-the-data" class="nav-link" data-scroll-target="#download-and-rename-the-data">Download and rename the data</a></li>
  <li><a href="#open-gephi-and-create-a-new-project" id="toc-open-gephi-and-create-a-new-project" class="nav-link" data-scroll-target="#open-gephi-and-create-a-new-project">Open Gephi and create a new project</a></li>
  <li><a href="#upload-the-node-list-to-gephi" id="toc-upload-the-node-list-to-gephi" class="nav-link" data-scroll-target="#upload-the-node-list-to-gephi">Upload the node list to gephi</a></li>
  <li><a href="#copy-the-mp-names-to-the-label-column" id="toc-copy-the-mp-names-to-the-label-column" class="nav-link" data-scroll-target="#copy-the-mp-names-to-the-label-column">Copy the MP names to the label column</a></li>
  <li><a href="#upload-the-edge-list-to-gephi" id="toc-upload-the-edge-list-to-gephi" class="nav-link" data-scroll-target="#upload-the-edge-list-to-gephi">Upload the edge list to gephi</a></li>
  <li><a href="#the-overview-screen" id="toc-the-overview-screen" class="nav-link" data-scroll-target="#the-overview-screen">The Overview Screen</a></li>
  <li><a href="#choosing-a-layout-algorithm" id="toc-choosing-a-layout-algorithm" class="nav-link" data-scroll-target="#choosing-a-layout-algorithm">Choosing a layout algorithm</a></li>
  <li><a href="#adjust-the-layout-algorithm-to-make-it-more-readable" id="toc-adjust-the-layout-algorithm-to-make-it-more-readable" class="nav-link" data-scroll-target="#adjust-the-layout-algorithm-to-make-it-more-readable">Adjust the layout algorithm to make it more readable</a></li>
  <li><a href="#add-and-adjust-the-labels." id="toc-add-and-adjust-the-labels." class="nav-link" data-scroll-target="#add-and-adjust-the-labels.">Add and adjust the labels.</a></li>
  <li><a href="#color-the-nodes-by-party-politics-andor-party-name." id="toc-color-the-nodes-by-party-politics-andor-party-name." class="nav-link" data-scroll-target="#color-the-nodes-by-party-politics-andor-party-name.">Color the nodes by party politics and/or party name.</a>
  <ul class="collapse">
  <li><a href="#colour-by-party" id="toc-colour-by-party" class="nav-link" data-scroll-target="#colour-by-party">Colour by party</a></li>
  <li><a href="#colour-by-party-position" id="toc-colour-by-party-position" class="nav-link" data-scroll-target="#colour-by-party-position">Colour by party position</a></li>
  </ul></li>
  <li><a href="#calculate-and-look-at-network-statistics" id="toc-calculate-and-look-at-network-statistics" class="nav-link" data-scroll-target="#calculate-and-look-at-network-statistics">Calculate and look at network statistics</a>
  <ul class="collapse">
  <li><a href="#calculate-scores" id="toc-calculate-scores" class="nav-link" data-scroll-target="#calculate-scores">Calculate scores</a></li>
  <li><a href="#size-by-betweenness" id="toc-size-by-betweenness" class="nav-link" data-scroll-target="#size-by-betweenness">Size by betweenness</a></li>
  </ul></li>
  <li><a href="#preview-and-export" id="toc-preview-and-export" class="nav-link" data-scroll-target="#preview-and-export">Preview and export</a></li>
  <li><a href="#create-a-network-using-vistorian.net" id="toc-create-a-network-using-vistorian.net" class="nav-link" data-scroll-target="#create-a-network-using-vistorian.net">Create a network using Vistorian.net</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Network Analysis</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>For this tutorial, you’ll take a dataset of co-sponsors in the Dutch Parliament, and visualise it as a network using Gephi. In this tutorial you’ll learn not just the mechanics of creating a network using the software, but it will also demonstrate how you can use the settings as well as colour, size, and so forth, to make the network more readable and meaningful.</p>
<section id="download-and-install-gephi" class="level2">
<h2 class="anchored" data-anchor-id="download-and-install-gephi">Download and install Gephi</h2>
<p>The first step is to download and install the software, which runs on Windows, Linux, or MacOS. Go to https://gephi.org/users/download/ and follow the instructions for your operating system.</p>
</section>
<section id="download-and-rename-the-data" class="level2">
<h2 class="anchored" data-anchor-id="download-and-rename-the-data">Download and rename the data</h2>
<p>Once it is installed, the next step is to get the network data. Remember from the lecture, that a network consists of <strong>nodes</strong> and <strong>edges.</strong> Gephi needs at least an <strong>edge list</strong>, which is a list of all the connections in the network, one row at a time. Because we also want to give extra information about the MPs (the party they are part of, and the position of that party), we will also add a separate <strong>node list</strong> to Gephi.</p>
<p>First, download the <a href="node_list.csv">node list</a> and the <a href="edge_list.csv">edge list</a> to your computer and put them somewhere you can find them.</p>
<p>Open these two files in a spreadsheet programme such as Excel. Looking first at the edge_list.csv file, you’ll see it has three columns: two columns of MPs (mp1, mp2), representing the IDs for a pair of MPs who co-sponsored at least one bill together, and a third column, nCosponsor, which is a count of the number of times they co-sponsor together.</p>
<p><strong>This next step is crucial.</strong> In order to recognise the edge list and node list correctly, Gephi expects the columns to have very specific names. The edge list should have the format <code>Source, Target, Weight</code>. With the file open in a spreadsheet programme, change the existing three columns to these names, <strong>paying attention to the upper case letters at the beginning.</strong> Save the file.</p>
<p>Next, open the nodes_list.csv file. This needs one change in order to make it compatible with Gephi. In order to link the IDs in the edge list to the IDs here, the first column in the nodes list should be rename to <code>Id</code>, again paying attention to the upper first letter. Make this change and save the file.</p>
</section>
<section id="open-gephi-and-create-a-new-project" class="level2">
<h2 class="anchored" data-anchor-id="open-gephi-and-create-a-new-project">Open Gephi and create a new project</h2>
<p>Once you’ve done this, open the Gephi application. You’ll be greeted with this screen:</p>
<p><img src="images/image-1527541859.png" class="img-fluid"></p>
<p>Click on ‘New Project’ to begin with. You’ll notice three buttons near the top of the screen: ‘Overview’, ‘Data laboratory’, and ‘Preview’. Clicking these will switch between different screens. The Overview screen will show a graphical overview of your network, once uploaded. We’ll go back to this one. The Data Laboratory screen is where you’ll upload and change the network data. The Preview screen will show a version of your network ready to export to an image file.</p>
</section>
<section id="upload-the-node-list-to-gephi" class="level2">
<h2 class="anchored" data-anchor-id="upload-the-node-list-to-gephi">Upload the node list to gephi</h2>
<p>The first step is to add the node list, which contains the information about the individual MPs. To upload data to gephi, switch to the ‘data laboratory’ view, and click the ‘import spreadsheet’ button.</p>
<p><img src="images/image-609652091.png" class="img-fluid"></p>
<p>On the next screen (this will look a little different on Mac), go to the folder where you saved the two files, and open node_list.csv.</p>
<p>On the next screen, change the import type to ‘nodes table’, and click Next:</p>
<p><img src="images/image-1291999088.png" class="img-fluid"></p>
<p>Here, you need to make two small adjustments before you move onto the next stage. The data left_right and eu_anti_pro are a number, from 0 to 10, measuring where on the political spectrum the party of this MP falls in these ways (0 is most left-wing and 10 most right, and 0 is most anti EU, and 10 most pro EU). However, because some values are NA, Gephi has interpreted these as a series of characters or ‘Strings’, rather than a number. Looking back to our first week, the best way to visualise this information is treating the value as ‘continuous’, meaning, for example, we could colour it with a lighter or darker hue depending on whether the party was strongly pro or strongly anti-EU.</p>
<p>To do this, we need to specify to Gephi that it should intepret these columns as numbers. On this page, each of the columns in the data are listed, along with a drop-down menu where we can choose to change the type of data value Gephi will use. Most of the time the default is fine, but in this case, click on the drop-downs under left_right and eu_anti_pro, and change them to ‘double’:</p>
<p><img src="images/image-701343593.png" class="img-fluid"></p>
<p>Click ‘Finish’, and you’ll get another screen. It will show some errors, which you can ignore. You should make one change here: change the option from ‘New workspace’ to ‘Append to existing workspace’:</p>
<p><img src="images/image-600577421.png" class="img-fluid"></p>
<p>The data should now load into Gephi and look like this:</p>
<p><img src="images/image-1150002076.png" class="img-fluid"></p>
</section>
<section id="copy-the-mp-names-to-the-label-column" class="level2">
<h2 class="anchored" data-anchor-id="copy-the-mp-names-to-the-label-column">Copy the MP names to the label column</h2>
<p>Before we move on, we need to make one further change to the node list. When visualising the network later, Gephi takes the node labels from the column called ‘Label’, which it has added automatically, and currently is empty. This should be filled with the ‘mp_name’ column in the data. To do this, click on the ‘copy data to other column’ button at the bottom of the screen, and select ‘mp_name’ from the list. A window will pop up asking you which column you want to copy the mp_name information to. If ‘label’ is not selected, select it here, and click OK.</p>
<p><img src="images/image-1962023462.png" class="img-fluid"></p>
</section>
<section id="upload-the-edge-list-to-gephi" class="level2">
<h2 class="anchored" data-anchor-id="upload-the-edge-list-to-gephi">Upload the edge list to gephi</h2>
<p>The next step is to upload the edge list - the list of connected MPs based on co-sponsored bills. Because we have prepared the data correctly, Gephi will automatically notice that it should be connected to the names and information in the nodes list.</p>
<p>As before, click on ‘Import spreadsheet’. Open the ‘edge_list.csv’ file on the next screen and click OK. This time, you don’t need to make any changes to the import settings, so click ‘Next’, and then ‘Finish’.</p>
<p><strong>This next step is very important.</strong> As before, on the next window, change from ‘New Workspace’ to ‘Append to existing workspace’, in order for the edge list to be linked to your node list. That’s it: you’ve successfully imported the network, and now you can visualise it!</p>
</section>
<section id="the-overview-screen" class="level2">
<h2 class="anchored" data-anchor-id="the-overview-screen">The Overview Screen</h2>
<p>To work on visualising the network, click the Overview button to move to correct screen. You’ll see a series of connected points in the middle of the screen - this is the network with a random starting layour, and a pretty complicated looking set of options and buttons to choose from. At the top-left are a bunch of options for changing the size and colour of the nodes and edges. Underneath this are options to run a layout algorithm. On the right-hand side are some options to run statistics and find out more about your network.</p>
<p><img src="images/image-1448767435.png" class="img-fluid"></p>
<p>As it is, the network diagram is not much use. The position of the nodes is at random, so it doesn’t tell us anything about the structure of this network, and the nodes are all the same size and colour. We can use gephi options to make it much more informative. We’ll start by selecting and adjusting a layout algorithm which most clearly shows the structure, and then move on to labelling and colouring the nodes.</p>
</section>
<section id="choosing-a-layout-algorithm" class="level2">
<h2 class="anchored" data-anchor-id="choosing-a-layout-algorithm">Choosing a layout algorithm</h2>
<p>First, we’ll choose a layout algorithm. Layout algorithms generally try to place the nodes in a network in a way that reveals the structure of that network, usually using some kind of simulation of physical forces, such as gravity or springs. Gephi has a bunch of different ones to choose from. We’ll use <strong>ForceAtlas2</strong>, which often works well. Under the layout options, click on the drop-down menu and select ForceAtlas2 from the list.</p>
<p><img src="images/image-847491615.png" class="img-fluid"></p>
<p>To see what it looks like with the default settings, click ‘Run’. This will repeatedly run the algorithm until you tell it to stop. Usually, you’ll want to click stop when it stops changing in shape (though it might still be moving, for example spinning in circles). The result will look something like this, which isn’t very readable:</p>
<p><img src="images/image-1721360899.png" class="img-fluid"></p>
</section>
<section id="adjust-the-layout-algorithm-to-make-it-more-readable" class="level2">
<h2 class="anchored" data-anchor-id="adjust-the-layout-algorithm-to-make-it-more-readable">Adjust the layout algorithm to make it more readable</h2>
<p>However, there are many options to choose from which can help to make it more readable. With your own network, the best thing to do is experiment and continually re-run the algorithm. Look for settings which allow you to determine differences in the shape and structure of the network, and make it less clustered and easier to read.</p>
<p>For this network, try the following settings.</p>
<ul>
<li><p>First, select ‘LinLog mode’. This will exaggerate the differences between the nodes, spreading them out and making the clusters easier to see.</p></li>
<li><p>Change the ‘gravity’ setting from 1 to 3. At the default setting, unattached nodes (those who only co-sponsored themselves) disappeared. This brings them closer to the centre, so they are visible.</p></li>
<li><p>Click the ‘prevent overlap’ button. This adjusts the nodes slightly so they do not overlap with each other.</p></li>
<li><p>Change the ‘scaling’ option to 10, to further separate out the groups of nodes from each other.</p></li>
</ul>
<p>You should now see something like this, which is not perfect but some structure does begin to emerge:</p>
<p><img src="images/image-1692578145.png" class="img-fluid"></p>
</section>
<section id="add-and-adjust-the-labels." class="level2">
<h2 class="anchored" data-anchor-id="add-and-adjust-the-labels.">Add and adjust the labels.</h2>
<p>Next, we would like to display the names of each of the nodes (MPs). To do this, click on the following icon:</p>
<p><img src="images/image-1680429771.png" class="img-fluid"></p>
<p>You will also see two sliders, to the right of this. The first one adjusts the thickness of the edges, and the second adjusts the size of the labels. Experiment with these until you get a useable size.</p>
<p>Many of the labels are unreadable because they are overlapping with each other. Gephi has an option to fix this. Click again on the layout drop-down, and select ‘Label adjust’ from the list. Click run - it will adjust the labels so they don’t overlap, and stop automatically. Now the network should be somewhat readable:</p>
</section>
<section id="color-the-nodes-by-party-politics-andor-party-name." class="level2">
<h2 class="anchored" data-anchor-id="color-the-nodes-by-party-politics-andor-party-name.">Color the nodes by party politics and/or party name.</h2>
<p>At this point, we can see that the network has some kind of structure. There is a large cluster of connected MPs, a few smaller clusters, and a few outliers. But what connects them together? Do they form along party and political lines? We can use Gephi to colour the nodes by their attributes from the nodes_list table. We’ll try two options: first, colour the nodes by their party, and second, try a continuous colour, based on their party’s place on the left-right spectrum.</p>
<section id="colour-by-party" class="level3">
<h3 class="anchored" data-anchor-id="colour-by-party">Colour by party</h3>
<p>The options to colour nodes are at the top-left of the screen. This contains four icons: the first gives options for colouring nodes and edges, the second for sizing them, the third for colouring the labels, and the fourth for sizing the labels. Click on the painter palette if it is not already selected, and then the ‘Partition’ option. Click the drop-down menu and select ‘mp_party’. This will display a colour scheme:</p>
<p><img src="images/image-527398463.png" class="img-fluid"></p>
<p>Click apply, and the nodes will change colour.</p>
</section>
<section id="colour-by-party-position" class="level3">
<h3 class="anchored" data-anchor-id="colour-by-party-position">Colour by party position</h3>
<p>We also have data on the position on the left-right spectrum for the party of each MP (not the individual MP views, unfortunately). We can try colouring the nodes by this value too. Click on the ‘ranking’ option, and select ‘left_right’. Click apply to apply the default colour scheme, which runs from light green (for most left wing) to dark green (most right wing). However, if you think back to the lecture on colour theory, you’ll remember that in a case like this, it is better to use a <strong>diverging</strong> colour palette, where most left wing will be one dark colour, those in the middle will have light colour, and most right-wing will have a different dark colour. To change the palette, click on the small icon to the right of the colour bar:</p>
<p><img src="images/image-1706407741.png" class="img-fluid"></p>
<p>Notice that the palettes at the bottom consist of two colours with a light colour in the middle. Choose one of these, and apply it, which will colour the nodes by their party’s position:</p>
<p><img src="images/image-669199546.png" class="img-fluid"></p>
</section>
</section>
<section id="calculate-and-look-at-network-statistics" class="level2">
<h2 class="anchored" data-anchor-id="calculate-and-look-at-network-statistics">Calculate and look at network statistics</h2>
<p>While we’re more interested in the visual aspects for this tutorial, Gephi also allows you to calculate a series of network measurements, such as finding the most important nodes. As a demonstration, we’ll calculate the ‘betweenness centrality’ scores for the nodes in the network, and then use this value to re-size the nodes.</p>
<section id="calculate-scores" class="level3">
<h3 class="anchored" data-anchor-id="calculate-scores">Calculate scores</h3>
<p>To do this, look to the ‘statistics’ tab on the right-hand side. The measurement we’re interested in is hidden under the ‘Network diameter’ option. Click on this, then in the next window, change the option from ‘directed’ to ‘undirected’ - as this particular network is undirected. Click OK, and you’ll get a series of graphs in a new window, which you can close.</p>
</section>
<section id="size-by-betweenness" class="level3">
<h3 class="anchored" data-anchor-id="size-by-betweenness">Size by betweenness</h3>
<p>Now, we can include this information in the network visualisation, by sizing the nodes according to their betweenness centrality score. Go back to the ‘appearance’ window in the top-left, and click on the size option, to the right of the palette. Next, click ‘ranking’, then choose betweenness centrality from the drop-down menu. Click apply. You can adjust the minimum and maximum sizes to make it easier to read, if you like.</p>
<p><img src="images/image-776759511.png" class="img-fluid"></p>
<p>You can experiment with other measurements - which can also be set to colour values.</p>
</section>
</section>
<section id="preview-and-export" class="level2">
<h2 class="anchored" data-anchor-id="preview-and-export">Preview and export</h2>
<p>The last step is to create and export a publication-ready copy of your network.</p>
<p>This is done using the ‘Preview’ screen. Move to this by clicking on the button at the top of the screen. Here you can select a bunch of options for how you want the final version to look. Use the dropdown to select ‘Default straight’ to begin with, to draw the default version with straight rather than curved edges. Click ‘refresh’, to get a preview of the final file. If you’re happy with it, click export and save it as a .pdf, to be uploaded for this week’s assignment.</p>
<p><img src="images/image-1297842313.png" class="img-fluid"></p>
<p>The final image should look something like the below. Feel free to adjust the options and layout to make it as readable as possible. For example, try following the instructions here: https://stackoverflow.com/questions/38975945/labels-only-for-nodes-with-a-minimal-weight-of-x-in-Gephi to hide some of the smaller labels.</p>
<p><img src="images/image-112347595.png" class="img-fluid"></p>
</section>
<section id="create-a-network-using-vistorian.net" class="level2">
<h2 class="anchored" data-anchor-id="create-a-network-using-vistorian.net">Create a network using Vistorian.net</h2>
<p>If you can’t install Gephi, here is an alternative method to create a network, using an online application called The Vistorian. It is not as customisable as Gephi, but can create nice interactive graphs which are particularly useful for data exploration.</p>
<p>First, download these alternative versions of the files, in a slightly different format:</p>
<p><a href="edge_list_v.csv">Edge list</a></p>
<p><a href="node_list_v.csv">Node list</a></p>
<p>Go to https://vistorian.net/ in a browser, and click ’start my session.</p>
<p>On the next screen, click ‘Create network’, choose a name for it, and click Next.</p>
<p><img src="images/image-1769257028.png" class="img-fluid"></p>
<p>The Vistorian will ask a series of questions about your data. Click the correct option in each case, then hit Next to move on.</p>
<ul>
<li><p>For ‘What is the Format of your data?’, select</p>
<ul>
<li>I have one or several files in a <strong>tabular format</strong> (e.g., spreadsheet, CSV, ...)</li>
</ul></li>
<li><p>For How are links (edges) represented in your network?. select</p>
<ul>
<li>Link table: A table containing one row per link. Each row contains a pair of nodes that are linked</li>
</ul></li>
<li><p>For Are Links Directed?, select No</p></li>
</ul>
<p>Click on Upload a new file in the box, and upload the edge_list_v.csv file. Select the following options (see screenshot below):</p>
<ul>
<li><p>Add a header row, by ticking the checkbox</p></li>
<li><p>Set the source and target labels to mp_1 and mp_2</p></li>
<li><p>Set the link weight to the weight column</p></li>
</ul>
<p><img src="images/image-1102497884.png" class="img-fluid"></p>
<p>Hit next. On the next page, you’ll be asked if you have an additional node file. Click yes, and upload the node_list_v.csv file. Click to select a header row, set the node ID to name, and the Node Type to party_name.</p>
<p><img src="images/image-1700674970.png" class="img-fluid"></p>
<p>Hit next, and your data should be successfully loaded. You’ll see a number of options for network visualisations. Our data doesn’t have temporal or geographic data associated with it, so only the first two are relevant.</p>
<p>Start with the Node Link visualisation, and experiment with node and link attributes in order to make a readable and useable graph. When you’re done, take a screenshot and upload to the assignment area on Brightspace. It should hopefully look something like this:</p>
<p><img src="images/image-464698750.png" class="img-fluid"></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./digital-mapping-3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Digital Mapping 3</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./design.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Finishing Touches: Creating Narratives with Your Datavis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>